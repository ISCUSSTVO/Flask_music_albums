{% extends "base.html" %}
{% block content %}
<div class="container" style="padding-top: 60px;">
    <div class="album-hero">
        <img src="{{ url_for('static', filename='img/covers/' ~ (album.cover_url if album.cover_url else 'default.jpeg')) }}" 
             class="main-cover" 
             onerror="this.src='/static/img/covers/default.jpeg';">
        
        <div class="album-info">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <span class="genre-tag">{{ album.genre }}</span>
                    <h1>{{ album.title }}</h1>
                </div>
                
            
                {% if current_user.is_authenticated %}
                <form action="{{ url_for('media.delete_album', album_id=album.id) }}" method="POST" onsubmit="return confirm('Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð°Ð»ÑŒÐ±Ð¾Ð¼ Ð½Ð°Ð²ÑÐµÐ³Ð´Ð°?');">
                    <button type="submit" class="btn-logout" style="background: rgba(255, 77, 77, 0.2); color: #ff4d4d; border: 1px solid #ff4d4d; padding: 8px 15px; border-radius: 6px; cursor: pointer;">
                        ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð°Ð»ÑŒÐ±Ð¾Ð¼
                    </button>
                </form>
                {% endif %}
            </div>

            <p class="meta">
                <a href="{{ url_for('main.artist_page', artist_id=album.author.id) }}" style="color: #64ffda; text-decoration: none; font-weight: bold;">
                    {{ album.author.name }}
                </a> â€¢ {{ album.year }}
            </p>
            <div class="big-rating">
                <span style="color: #ffd700;">{{ "â˜…" * (album.rating | int) }}</span>
                <span class="num" style="margin-left: 10px; opacity: 0.6;">{{ album.rating }}</span>
            </div>
        </div>
    </div>

    <div class="content-split">
        <div class="reviews-flow">
            <h3>Ð ÐµÑ†ÐµÐ½Ð·Ð¸Ð¸</h3>
            <form method="POST" class="review-form">
                <textarea name="text" placeholder="Ð¢Ð²Ð¾Ðµ Ð¼Ð½ÐµÐ½Ð¸Ðµ..." required></textarea>
                <div class="form-footer">
                    <input type="number" name="rating" min="1" max="5" value="5" style="width: 60px; padding: 5px; border-radius: 4px; background: #1a2634; color: white; border: 1px solid #3d4d5f;">
                    <button type="submit" class="btn-primary">ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ</button>
                </div>
            </form>

            {% for review in album.reviews | reverse %}
            <div class="review-card">
                <div class="rev-header">
                    <span class="stars" style="color: #ffd700;">{{ "â˜…" * review.rating }}</span>
                    <span class="date">{{ review.created_at.strftime('%d.%m.%Y') }}</span>
                </div>
                <p>{{ review.text }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}