{% extends "base.html" %}
{% block content %}
<div class="artist-header" style="background-image: linear-gradient(to bottom, rgba(18, 24, 33, 0.7), #121821), url('{{ url_for('static', filename='img/artists/' ~ (artist.image_url if artist.image_url else 'default_artist.jpg')) }}');">
    <div class="container artist-header-content">
        <div class="artist-info-main">
            <span class="badge">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</span>
            <h1>{{ artist.name }}</h1>
        </div>
        
        {% if current_user.is_authenticated %}
        <form action="{{ url_for('media.delete_artist', artist_id=artist.id) }}" method="POST" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–∞ –∏ –í–°–ï –µ–≥–æ –∞–ª—å–±–æ–º—ã?');" class="admin-action">
            <button type="submit" class="btn-delete-main">
                <span class="icon">üóë</span> –£–¥–∞–ª–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–∞
            </button>
        </form>
        {% endif %}
    </div>
</div>

<div class="container">
    <div class="section-header-inline">
        <h2 style="margin: 40px 0 20px;">–î–∏—Å–∫–æ–≥—Ä–∞—Ñ–∏—è</h2>
        
        <form method="GET" action="{{ url_for('main.artist_page', artist_id=artist.id) }}" class="sort-form">
            <select name="sort" onchange="this.form.submit()" class="select-styled">
                <option value="rating" {% if request.args.get('sort') == 'rating' %}selected{% endif %}>–õ—É—á—à–∏–µ</option>
                <option value="newest" {% if request.args.get('sort') == 'newest' %}selected{% endif %}>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                <option value="oldest" {% if request.args.get('sort') == 'oldest' %}selected{% endif %}>–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
            </select>
        </form>
    </div>

    <div class="grid">
        {% for album in albums %}
        <div class="card">
            {% if current_user.is_authenticated %}
            <form action="{{ url_for('media.delete_album', album_id=album.id) }}" method="POST" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∞–ª—å–±–æ–º?');" class="delete-album-form">
                <button type="submit" class="btn-delete-small" title="–£–¥–∞–ª–∏—Ç—å –∞–ª—å–±–æ–º">√ó</button>
            </form>
            {% endif %}

            <a href="{{ url_for('main.album_page', album_id=album.id) }}" class="card-link">
                <div class="cover-wrapper">
                    <img src="{{ url_for('static', filename='img/covers/' ~ (album.cover_url if album.cover_url else 'default.jpeg')) }}" 
                         class="album-cover-mini" 
                         alt="{{ album.title }}"
                         onerror="this.src='/static/img/covers/default.jpeg';">
                </div>
                <div class="card-content">
                    <div class="card-header">
                        <span class="year">{{ album.year }}</span>
                        <span class="genre-mini">{{ album.genre }}</span>
                    </div>
                    <h3>{{ album.title }}</h3>
                    <div class="rating-stars">
                        <span class="stars-gold">{{ "‚òÖ" * (album.rating | int) }}</span>
                        <span class="stars-gray">{{ "‚òÜ" * (5 - (album.rating | int)) }}</span>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}